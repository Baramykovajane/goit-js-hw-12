{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"52792458-b846233229dd28b7897b8b61b\";\nconst PER_PAGE = 15;\nexport async function getImagesByQuery(query, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,          \n        per_page: 15,  \n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    console.error(\"Error fetching images:\", error);\n    throw error;\n  }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryContainer = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\"); \nconst loadMoreBtn = document.getElementById('load-more');\nconst lightbox = new SimpleLightbox(\".gallery a\", { captionsData: \"alt\", captionDelay: 250 });\n\nexport function createGallery(images) {\n  const markup = images.map(\n    ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n          <div class=\"info\">\n            <p>üëç ${likes}</p>\n            <p>üëÅÔ∏è ${views}</p>\n            <p>üí¨ ${comments}</p>\n            <p>‚¨áÔ∏è ${downloads}</p>\n          </div>\n        </a>\n      </li>\n    `\n  ).join(\"\");\n\n  galleryContainer.insertAdjacentHTML(\"beforeend\", markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  galleryContainer.innerHTML = \"\";\n}\n\nexport function showLoader() {\nloader.classList.remove('hidden');\nloader.classList.add('active');\n}\n\n\nexport function hideLoader() {\nloader.classList.add('hidden');\nloader.classList.remove('active');\n}\n\n\nexport function showLoadMoreButton() {\nloadMoreBtn.classList.remove('hidden');\n}\n\n\nexport function hideLoadMoreButton() {\nloadMoreBtn.classList.add('hidden');\n}\n\n\nexport function getGalleryContainer() {\nreturn galleryContainer;\n}\n\n\nexport function getLoadMoreButton() {\nreturn loadMoreBtn;\n}","import { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  getGalleryContainer,\n  getLoadMoreButton,\n} from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.getElementById(\"search-form\");\nconst input = form.querySelector('input[name=\"search-text\"]');\nconst gallery = getGalleryContainer();\nconst loadMoreBtn = getLoadMoreButton();\n\nlet currentQuery = \"\";\nlet currentPage = 1;\nlet totalHits = 0;\n\nfunction handleEndOfResults() {\n  hideLoadMoreButton();\n  iziToast.info({\n    icon: 'fa-solid fa-ban',\n    iconColor: '#2222',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    timeout: 3000,\n    position: \"topRight\",\n  });\n}\n\nform.addEventListener(\"submit\", async (event) => {\n  event.preventDefault();\n  const query = input.value.trim();\n  if (!query) {\n    iziToast.error({\n      icon: \"fa-solid fa-ban\",\n      iconColor: \"#2222\",\n      message: \"Please enter a search term!\",\n      backgroundColor: \"#EF4040\",\n      timeout: 3000,\n      position: \"topRight\",\n    });\n    return;\n  }\n\n  if (query !== currentQuery) {\n    currentQuery = query;\n    currentPage = 1;\n    totalHits = 0;\n    clearGallery();\n    hideLoadMoreButton();\n  }\n\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n    if (!data.hits?.length) {\n      iziToast.info({\n        icon: 'fa-solid fa-ban',\n        iconColor: '#2222',\n        message: \"Sorry, there are no images matching your search query.\",\n        backgroundColor: \"#EF4040\",\n        timeout: 3000,\n        position: \"topRight\",\n      });\n      hideLoadMoreButton();\n      return;\n    }\n\n    createGallery(data.hits);\n\n    totalHits = data.totalHits || 0;\n    const pagesCount = Math.ceil(totalHits / 15);\n\n    currentPage += 1;\n\n    if (currentPage > pagesCount) {\n      handleEndOfResults();\n    } else {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.error({\n      icon: 'fa-solid fa-ban',\n      iconColor: '#2222',\n      message: \"Something went wrong. Please try again!\",\n      backgroundColor: \"#EF4040\",\n      timeout: 3000,\n      position: \"topRight\",\n    });\n    console.error(error);\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n  try {\n    showLoader();\n\n    currentPage += 1; \n\n    const data = await getImagesByQuery(currentQuery, currentPage);\n\n    if (!data.hits?.length) {\n      handleEndOfResults();\n      return;\n    }\n\n    createGallery(data.hits);\n\n    const firstCard = gallery.querySelector(\".gallery-item\");\n    if (firstCard) {\n      const { height: cardHeight } = firstCard.getBoundingClientRect();\n      window.scrollBy({ top: cardHeight * 2, behavior: \"smooth\" });\n    }\n\n    const pagesCount = Math.ceil(totalHits / 15);\n    if (currentPage >= pagesCount) {\n      handleEndOfResults();\n    }\n  } catch (error) {\n    iziToast.error({\n      icon: 'fa-solid fa-ban',\n      iconColor: '#2222',\n      message: \"Something went wrong. Please try again!\",\n      backgroundColor: \"#EF4040\",\n      timeout: 3000,\n      position: \"topRight\",\n    });\n    console.error(error);\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","page","axios","error","galleryContainer","loader","loadMoreBtn","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","getGalleryContainer","getLoadMoreButton","form","input","gallery","currentQuery","currentPage","totalHits","handleEndOfResults","iziToast","event","data","_a","pagesCount","firstCard","cardHeight"],"mappings":"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"}