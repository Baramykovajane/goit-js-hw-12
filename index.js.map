{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"52792458-b846233229dd28b7897b8b61b\";\nconst PER_PAGE = 15;\nexport async function getImagesByQuery(query, page = 1) {\ntry {\nconst url = new URL(BASE_URL);\nurl.searchParams.set('key', API_KEY);\nurl.searchParams.set('q', query);\nurl.searchParams.set('image_type', 'photo');\nurl.searchParams.set('orientation', 'horizontal');\nurl.searchParams.set('safesearch', 'true');\nurl.searchParams.set('per_page', PER_PAGE.toString());\nurl.searchParams.set('page', String(page));\n\n\nconst response = await fetch(url.toString());\nif (!response.ok) {\nthrow new Error(`HTTP error! status: ${response.status}`);\n}\nconst data = await response.json();\nreturn data; \n} catch (error) {\nconsole.error('Error fetching images:', error);\nthrow error;\n}\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryContainer = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\"); \nconst loadMoreBtn = document.getElementById('load-more');\nconst lightbox = new SimpleLightbox(\".gallery a\", { captionsData: \"alt\", captionDelay: 250 });\n\nexport function createGallery(images) {\n  const markup = images.map(\n    ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n          <div class=\"info\">\n            <p>üëç ${likes}</p>\n            <p>üëÅÔ∏è ${views}</p>\n            <p>üí¨ ${comments}</p>\n            <p>‚¨áÔ∏è ${downloads}</p>\n          </div>\n        </a>\n      </li>\n    `\n  ).join(\"\");\n\n  galleryContainer.insertAdjacentHTML(\"beforeend\", markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  galleryContainer.innerHTML = \"\";\n}\n\nexport function showLoader() {\nloader.classList.remove('hidden');\nloader.classList.add('active');\n}\n\n\nexport function hideLoader() {\nloader.classList.add('hidden');\nloader.classList.remove('active');\n}\n\n\nexport function showLoadMoreButton() {\nloadMoreBtn.classList.remove('hidden');\n}\n\n\nexport function hideLoadMoreButton() {\nloadMoreBtn.classList.add('hidden');\n}\n\n\nexport function getGalleryContainer() {\nreturn galleryContainer;\n}\n\n\nexport function getLoadMoreButton() {\nreturn loadMoreBtn;\n}","import { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport {\ncreateGallery,\nclearGallery,\nshowLoader,\nhideLoader,\nshowLoadMoreButton,\nhideLoadMoreButton,\ngetGalleryContainer,\ngetLoadMoreButton,\n} from './js/render-functions.js';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.getElementById('search-form');\nconst input = form.querySelector('input[name=\"search-text\"]');\nconst gallery = getGalleryContainer();\nconst loadMoreBtn = getLoadMoreButton();\n\n\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", async (e) => {\n  e.preventDefault();\n\n  const query = input.value.trim();\n  if (!query) {\n    iziToast.error({\n      icon: 'fa-solid fa-ban',\n      iconColor: '#2222',\n      message: \"Please enter a search term!\",\n      backgroundColor: \"#EF4040\",\n      timeout: 3000,\n      close: false,\n      position: \"topRight\"\n    });\n    return;\n  }\n  if (query !== currentQuery) {\ncurrentQuery = query;\ncurrentPage = 1;\nclearGallery();\nhideLoadMoreButton();\n}\n\n\ntry {\nshowLoader();\n  const data = await getImagesByQuery(currentQuery, currentPage);\n  if (!data.hits || data.hits.length === 0) {\niziToast.info({\nicon: 'fa-solid fa-ban',\niconColor: '#2222',\nmessage: \"Sorry, there are no images matching your search query. Please try again!\",\nbackgroundColor: '#EF4040',\ntimeout: 3000,\nclose: false,\nposition: 'topRight',\n});\nhideLoadMoreButton();\nreturn;\n  }\n  createGallery(data.hits);\n\n\n  totalHits = data.totalHits || 0;\n  const pagesCount = Math.ceil(totalHits / 15);\n\n\nif (currentPage < pagesCount) {\nshowLoadMoreButton();\n} else {\nhideLoadMoreButton();\niziToast.info({\nmessage: \"We're sorry, but you've reached the end of search results.\",\ntimeout: 4000,\nposition: 'topRight',\n});\n  }\n  currentPage += 1;\n} catch (error) {\niziToast.error({\nicon: 'fa-solid fa-ban',\niconColor: '#2222',\nmessage: 'Something went wrong. Please try again!',\nbackgroundColor: '#EF4040',\ntimeout: 3000,\nclose: false,\nposition: 'topRight',\n});\nconsole.error(error);\n} finally {\nhideLoader();\n}\n});\nloadMoreBtn.addEventListener('click', async () => {\ntry {\nshowLoader();\nconst data = await getImagesByQuery(currentQuery, currentPage);\n\n\nif (!data.hits || data.hits.length === 0) {\nhideLoadMoreButton();\niziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\nreturn;\n}\n\n\n  createGallery(data.hits);\n  const firstCard = gallery.querySelector('.gallery-item');\nif (firstCard) {\nconst { height: cardHeight } = firstCard.getBoundingClientRect();\nwindow.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n}\n\n\ntotalHits = data.totalHits || totalHits;\nconst pagesCount = Math.ceil(totalHits / 15);\n\n\nif (currentPage >= pagesCount) {\nhideLoadMoreButton();\niziToast.info({ message: \"We're sorry, but you've reached the end of search results.\", timeout: 3000 });\n} else {\nshowLoadMoreButton();\n}\n\n\ncurrentPage += 1;\n} catch (error) {\niziToast.error({ message: 'Something went wrong. Please try again!' });\nconsole.error(error);\n} finally {\nhideLoader();\n}\n});\n\n\n  "],"names":["BASE_URL","API_KEY","PER_PAGE","getImagesByQuery","query","page","url","response","error","galleryContainer","loader","loadMoreBtn","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","getGalleryContainer","getLoadMoreButton","form","input","gallery","currentQuery","currentPage","totalHits","e","iziToast","data","pagesCount","firstCard","cardHeight"],"mappings":"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"}